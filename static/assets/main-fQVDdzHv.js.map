{"version":3,"file":"main-fQVDdzHv.js","sources":["../../src/rendering/SceneManager.ts","../../src/physics/PhysicsManager.ts","../../src/config/constants.ts","../../src/game/StateManager.ts","../../src/ui/UIController.ts","../../src/game/GameManager.ts","../../src/main.ts"],"sourcesContent":["import * as THREE from 'three';\r\n\r\n/**\r\n * Manages Three.js scene, camera, renderer, and lighting\r\n */\r\nexport class SceneManager {\r\n  public scene: THREE.Scene;\r\n  public camera: THREE.PerspectiveCamera;\r\n  public renderer: THREE.WebGLRenderer;\r\n  private canvas: HTMLCanvasElement;\r\n\r\n  constructor(canvas: HTMLCanvasElement) {\r\n    this.canvas = canvas;\r\n    this.scene = new THREE.Scene();\r\n    this.camera = this.createCamera();\r\n    this.renderer = this.createRenderer();\r\n    \r\n    this.setupLighting();\r\n    this.setupBackground();\r\n    this.handleResize();\r\n    \r\n    window.addEventListener('resize', () => this.handleResize());\r\n  }\r\n\r\n  /**\r\n   * Create and configure camera\r\n   */\r\n  private createCamera(): THREE.PerspectiveCamera {\r\n    const camera = new THREE.PerspectiveCamera(\r\n      60, // FOV\r\n      window.innerWidth / window.innerHeight, // Aspect\r\n      0.1, // Near plane\r\n      1000 // Far plane\r\n    );\r\n\r\n    // Position camera to view the coin pusher machine\r\n    camera.position.set(0, 10, 15);\r\n    camera.lookAt(0, 2, 0);\r\n\r\n    return camera;\r\n  }\r\n\r\n  /**\r\n   * Create and configure WebGL renderer\r\n   */\r\n  private createRenderer(): THREE.WebGLRenderer {\r\n    const renderer = new THREE.WebGLRenderer({\r\n      canvas: this.canvas,\r\n      antialias: true,\r\n      alpha: true\r\n    });\r\n\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\r\n    renderer.shadowMap.enabled = true;\r\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n    renderer.outputColorSpace = THREE.SRGBColorSpace;\r\n\r\n    return renderer;\r\n  }\r\n\r\n  /**\r\n   * Setup scene lighting (70s arcade aesthetic)\r\n   */\r\n  private setupLighting(): void {\r\n    // Ambient light for base illumination\r\n    const ambientLight = new THREE.AmbientLight(0x8855ff, 0.4);\r\n    this.scene.add(ambientLight);\r\n\r\n    // Main directional light (warm tone)\r\n    const mainLight = new THREE.DirectionalLight(0xffdd88, 0.8);\r\n    mainLight.position.set(5, 10, 5);\r\n    mainLight.castShadow = true;\r\n    mainLight.shadow.camera.left = -15;\r\n    mainLight.shadow.camera.right = 15;\r\n    mainLight.shadow.camera.top = 15;\r\n    mainLight.shadow.camera.bottom = -15;\r\n    mainLight.shadow.mapSize.width = 2048;\r\n    mainLight.shadow.mapSize.height = 2048;\r\n    this.scene.add(mainLight);\r\n\r\n    // Neon accent lights (magenta and cyan for 70s vibe)\r\n    const neonMagenta = new THREE.PointLight(0xff00ff, 1, 20);\r\n    neonMagenta.position.set(-8, 5, 0);\r\n    this.scene.add(neonMagenta);\r\n\r\n    const neonCyan = new THREE.PointLight(0x00ffff, 1, 20);\r\n    neonCyan.position.set(8, 5, 0);\r\n    this.scene.add(neonCyan);\r\n\r\n    // Back rim light\r\n    const rimLight = new THREE.DirectionalLight(0xff00ff, 0.3);\r\n    rimLight.position.set(0, 5, -10);\r\n    this.scene.add(rimLight);\r\n  }\r\n\r\n  /**\r\n   * Setup scene background\r\n   */\r\n  private setupBackground(): void {\r\n    // Gradient background (purple to dark blue)\r\n    const gradientTexture = this.createGradientTexture();\r\n    this.scene.background = gradientTexture;\r\n    \r\n    // Add fog for depth\r\n    this.scene.fog = new THREE.Fog(0x1a0033, 10, 50);\r\n  }\r\n\r\n  /**\r\n   * Create gradient texture for background\r\n   */\r\n  private createGradientTexture(): THREE.Texture {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = 2;\r\n    canvas.height = 256;\r\n    \r\n    const ctx = canvas.getContext('2d')!;\r\n    const gradient = ctx.createLinearGradient(0, 0, 0, 256);\r\n    gradient.addColorStop(0, '#1a0033');\r\n    gradient.addColorStop(0.5, '#330066');\r\n    gradient.addColorStop(1, '#1a0033');\r\n    \r\n    ctx.fillStyle = gradient;\r\n    ctx.fillRect(0, 0, 2, 256);\r\n    \r\n    const texture = new THREE.CanvasTexture(canvas);\r\n    texture.needsUpdate = true;\r\n    \r\n    return texture;\r\n  }\r\n\r\n  /**\r\n   * Handle window resize\r\n   */\r\n  private handleResize(): void {\r\n    const width = window.innerWidth;\r\n    const height = window.innerHeight;\r\n\r\n    this.camera.aspect = width / height;\r\n    this.camera.updateProjectionMatrix();\r\n\r\n    this.renderer.setSize(width, height);\r\n    this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\r\n  }\r\n\r\n  /**\r\n   * Render the scene\r\n   */\r\n  public render(): void {\r\n    this.renderer.render(this.scene, this.camera);\r\n  }\r\n\r\n  /**\r\n   * Add object to scene\r\n   */\r\n  public add(object: THREE.Object3D): void {\r\n    this.scene.add(object);\r\n  }\r\n\r\n  /**\r\n   * Remove object from scene\r\n   */\r\n  public remove(object: THREE.Object3D): void {\r\n    this.scene.remove(object);\r\n  }\r\n\r\n  /**\r\n   * Cleanup resources\r\n   */\r\n  public dispose(): void {\r\n    this.renderer.dispose();\r\n    window.removeEventListener('resize', () => this.handleResize());\r\n  }\r\n}\r\n","import RAPIER from '@dimforge/rapier3d';\r\n\r\n/**\r\n * Physics world manager using Rapier3D\r\n */\r\nexport class PhysicsManager {\r\n  public world: RAPIER.World | null = null;\r\n  private accumulator: number = 0;\r\n  private readonly fixedTimeStep: number = 1 / 60; // 60 Hz\r\n\r\n  /**\r\n   * Initialize physics engine (async - WASM loading)\r\n   */\r\n  public async initialize(): Promise<void> {\r\n    console.log('[Physics] Initializing Rapier3D...');\r\n    \r\n    try {\r\n      // Create physics world with gravity\r\n      const gravity = { x: 0.0, y: -9.81, z: 0.0 };\r\n      this.world = new RAPIER.World(gravity);\r\n\r\n      console.log('[Physics] Rapier3D initialized successfully');\r\n    } catch (error) {\r\n      console.error('[Physics] Failed to initialize:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Step physics simulation with fixed timestep\r\n   */\r\n  public step(deltaTime: number): void {\r\n    if (!this.world) return;\r\n\r\n    // Accumulate time\r\n    this.accumulator += deltaTime;\r\n\r\n    // Run fixed timestep updates\r\n    while (this.accumulator >= this.fixedTimeStep) {\r\n      this.world.step();\r\n      this.accumulator -= this.fixedTimeStep;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a dynamic rigid body (for coins)\r\n   */\r\n  public createDynamicBody(\r\n    position: { x: number; y: number; z: number },\r\n    shape: RAPIER.ColliderDesc\r\n  ): RAPIER.RigidBody {\r\n    if (!this.world) {\r\n      throw new Error('Physics not initialized');\r\n    }\r\n\r\n    const rigidBodyDesc = RAPIER.RigidBodyDesc.dynamic()\r\n      .setTranslation(position.x, position.y, position.z);\r\n\r\n    const rigidBody = this.world.createRigidBody(rigidBodyDesc);\r\n    this.world.createCollider(shape, rigidBody);\r\n\r\n    return rigidBody;\r\n  }\r\n\r\n  /**\r\n   * Create a kinematic rigid body (for pusher)\r\n   */\r\n  public createKinematicBody(\r\n    position: { x: number; y: number; z: number },\r\n    shape: RAPIER.ColliderDesc\r\n  ): RAPIER.RigidBody {\r\n    if (!this.world) {\r\n      throw new Error('Physics not initialized');\r\n    }\r\n\r\n    const rigidBodyDesc = RAPIER.RigidBodyDesc.kinematicPositionBased()\r\n      .setTranslation(position.x, position.y, position.z);\r\n\r\n    const rigidBody = this.world.createRigidBody(rigidBodyDesc);\r\n    this.world.createCollider(shape, rigidBody);\r\n\r\n    return rigidBody;\r\n  }\r\n\r\n  /**\r\n   * Create a static rigid body (for walls/floors)\r\n   */\r\n  public createStaticBody(\r\n    position: { x: number; y: number; z: number },\r\n    shape: RAPIER.ColliderDesc\r\n  ): void {\r\n    if (!this.world) {\r\n      throw new Error('Physics not initialized');\r\n    }\r\n\r\n    const rigidBodyDesc = RAPIER.RigidBodyDesc.fixed()\r\n      .setTranslation(position.x, position.y, position.z);\r\n\r\n    const rigidBody = this.world.createRigidBody(rigidBodyDesc);\r\n    this.world.createCollider(shape, rigidBody);\r\n  }\r\n\r\n  /**\r\n   * Create cylinder collider descriptor\r\n   */\r\n  public createCylinderCollider(\r\n    radius: number,\r\n    halfHeight: number,\r\n    friction: number = 0.4,\r\n    restitution: number = 0.2\r\n  ): RAPIER.ColliderDesc {\r\n    return RAPIER.ColliderDesc.cylinder(halfHeight, radius)\r\n      .setFriction(friction)\r\n      .setRestitution(restitution);\r\n  }\r\n\r\n  /**\r\n   * Create cuboid collider descriptor\r\n   */\r\n  public createCuboidCollider(\r\n    halfWidth: number,\r\n    halfHeight: number,\r\n    halfDepth: number,\r\n    friction: number = 0.5,\r\n    restitution: number = 0.1\r\n  ): RAPIER.ColliderDesc {\r\n    return RAPIER.ColliderDesc.cuboid(halfWidth, halfHeight, halfDepth)\r\n      .setFriction(friction)\r\n      .setRestitution(restitution);\r\n  }\r\n\r\n  /**\r\n   * Remove rigid body from world\r\n   */\r\n  public removeBody(body: RAPIER.RigidBody): void {\r\n    if (!this.world) return;\r\n    this.world.removeRigidBody(body);\r\n  }\r\n\r\n  /**\r\n   * Check if physics is ready\r\n   */\r\n  public isReady(): boolean {\r\n    return this.world !== null;\r\n  }\r\n}\r\n","import type {\r\n  GameConfig,\r\n  MachineConfig,\r\n  CoinPhysicsProperties\r\n} from '../types';\r\n\r\n/**\r\n * Global Game Configuration\r\n */\r\nexport const GAME_CONFIG: GameConfig = {\r\n  startingBalance: 500,\r\n  maxBalance: 9999999,\r\n  dropCooldownMs: 1000,\r\n  maxActiveCoins: 50,\r\n  targetFPS: 60,\r\n  physicsStepRate: 60,\r\n  coinRewardMultiplier: 10\r\n};\r\n\r\n/**\r\n * Default Coin Physics Properties\r\n */\r\nexport const DEFAULT_COIN_PROPERTIES: CoinPhysicsProperties = {\r\n  radius: 0.05,\r\n  thickness: 0.01,\r\n  mass: 0.5,\r\n  friction: 0.4,\r\n  restitution: 0.2,\r\n  linearDamping: 0.1,\r\n  angularDamping: 0.05\r\n};\r\n\r\n/**\r\n * Machine Configuration\r\n */\r\nexport const MACHINE_CONFIG: MachineConfig = {\r\n  dimensions: {\r\n    width: 10,\r\n    depth: 15,\r\n    upperTierHeight: 5,\r\n    lowerTierHeight: 2,\r\n    wallHeight: 3,\r\n    wallThickness: 0.2\r\n  },\r\n  dropSlots: [\r\n    { id: 0, position: { x: -2, y: 8, z: -5 }, angle: 30 },\r\n    { id: 1, position: { x: -0.5, y: 8, z: -5 }, angle: 15 },\r\n    { id: 2, position: { x: 0.5, y: 8, z: -5 }, angle: -15 },\r\n    { id: 3, position: { x: 2, y: 8, z: -5 }, angle: -30 }\r\n  ],\r\n  pusher: {\r\n    width: 9.5,\r\n    height: 0.5,\r\n    depth: 1.5,\r\n    startZ: -2,\r\n    endZ: 5,\r\n    forwardDuration: 3000,\r\n    backwardDuration: 3000\r\n  },\r\n  edgeZones: [\r\n    {\r\n      type: 'front',\r\n      position: { x: 0, y: 1, z: 7.5 },\r\n      size: { width: 10, depth: 1 },\r\n      reward: 10\r\n    },\r\n    {\r\n      type: 'left',\r\n      position: { x: -5.5, y: 1, z: 0 },\r\n      size: { width: 1, depth: 15 },\r\n      reward: 0\r\n    },\r\n    {\r\n      type: 'right',\r\n      position: { x: 5.5, y: 1, z: 0 },\r\n      size: { width: 1, depth: 15 },\r\n      reward: 0\r\n    }\r\n  ]\r\n};\r\n\r\n/**\r\n * LocalStorage Keys\r\n */\r\nexport const STORAGE_KEY = 'coinslosh_state';\r\n\r\n/**\r\n * Current Version\r\n */\r\nexport const CURRENT_VERSION = '1.0.0';\r\n","import type { GameState } from '../types';\r\nimport { GAME_CONFIG, STORAGE_KEY, CURRENT_VERSION } from '../config/constants';\r\n\r\n/**\r\n * Manages game state and persistence to localStorage\r\n */\r\nexport class StateManager {\r\n  private state: GameState;\r\n\r\n  constructor() {\r\n    this.state = this.getDefaultState();\r\n  }\r\n\r\n  /**\r\n   * Initialize state manager - loads from localStorage or creates default\r\n   */\r\n  public initialize(): void {\r\n    const loaded = this.load();\r\n    if (loaded) {\r\n      console.log('[State] Loaded saved state:', loaded);\r\n      this.state = loaded;\r\n    } else {\r\n      console.log('[State] Using default state');\r\n      this.state = this.getDefaultState();\r\n      this.save();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get current coin balance\r\n   */\r\n  public getBalance(): number {\r\n    return this.state.coinBalance;\r\n  }\r\n\r\n  /**\r\n   * Set coin balance with validation\r\n   */\r\n  public setBalance(value: number): void {\r\n    // Clamp between 0 and max\r\n    const clampedValue = Math.max(0, Math.min(value, GAME_CONFIG.maxBalance));\r\n    \r\n    if (this.state.coinBalance !== clampedValue) {\r\n      this.state.coinBalance = clampedValue;\r\n      this.state.timestamp = Date.now();\r\n      this.save();\r\n      console.log('[State] Balance updated:', clampedValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add coins to balance\r\n   */\r\n  public addCoins(amount: number): void {\r\n    this.setBalance(this.state.coinBalance + amount);\r\n  }\r\n\r\n  /**\r\n   * Subtract coins from balance\r\n   */\r\n  public subtractCoins(amount: number): void {\r\n    this.setBalance(this.state.coinBalance - amount);\r\n  }\r\n\r\n  /**\r\n   * Check if player can afford to drop a coin\r\n   */\r\n  public canDropCoin(): boolean {\r\n    return this.state.coinBalance > 0;\r\n  }\r\n\r\n  /**\r\n   * Check if balance is at maximum\r\n   */\r\n  public isMaxBalance(): boolean {\r\n    return this.state.coinBalance >= GAME_CONFIG.maxBalance;\r\n  }\r\n\r\n  /**\r\n   * Save state to localStorage\r\n   */\r\n  public save(): void {\r\n    try {\r\n      const serialized = JSON.stringify(this.state);\r\n      localStorage.setItem(STORAGE_KEY, serialized);\r\n    } catch (error) {\r\n      console.error('[State] Failed to save:', error);\r\n      if (error instanceof Error && error.name === 'QuotaExceededError') {\r\n        console.warn('[State] localStorage quota exceeded');\r\n        // Could implement cleanup here\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load state from localStorage\r\n   */\r\n  public load(): GameState | null {\r\n    try {\r\n      const serialized = localStorage.getItem(STORAGE_KEY);\r\n      if (!serialized) {\r\n        return null;\r\n      }\r\n\r\n      const parsed = JSON.parse(serialized);\r\n      \r\n      // Validate the loaded state\r\n      if (!this.validateState(parsed)) {\r\n        console.warn('[State] Invalid state in localStorage, using defaults');\r\n        return null;\r\n      }\r\n\r\n      // Migrate if needed\r\n      const migrated = this.migrateState(parsed);\r\n      \r\n      return migrated;\r\n    } catch (error) {\r\n      console.error('[State] Failed to load:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset to default state\r\n   */\r\n  public reset(): void {\r\n    this.state = this.getDefaultState();\r\n    this.save();\r\n    console.log('[State] Reset to defaults');\r\n  }\r\n\r\n  /**\r\n   * Get default starting state\r\n   */\r\n  private getDefaultState(): GameState {\r\n    return {\r\n      coinBalance: GAME_CONFIG.startingBalance,\r\n      timestamp: Date.now(),\r\n      version: CURRENT_VERSION,\r\n      statistics: undefined\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validate loaded state\r\n   */\r\n  private validateState(state: any): boolean {\r\n    if (typeof state !== 'object' || state === null) {\r\n      return false;\r\n    }\r\n\r\n    if (typeof state.coinBalance !== 'number' ||\r\n        state.coinBalance < 0 ||\r\n        state.coinBalance > GAME_CONFIG.maxBalance) {\r\n      return false;\r\n    }\r\n\r\n    if (typeof state.timestamp !== 'number' || state.timestamp > Date.now()) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Migrate state from older versions\r\n   */\r\n  private migrateState(state: any): GameState {\r\n    let migrated = { ...state };\r\n\r\n    // Add version if missing (pre-v1.0.0)\r\n    if (!migrated.version) {\r\n      migrated.version = CURRENT_VERSION;\r\n    }\r\n\r\n    // Future migrations would go here\r\n    // if (migrated.version === '1.0.0' && CURRENT_VERSION === '1.1.0') { ... }\r\n\r\n    return migrated as GameState;\r\n  }\r\n\r\n  /**\r\n   * Get full state (for debugging)\r\n   */\r\n  public getState(): GameState {\r\n    return { ...this.state };\r\n  }\r\n}\r\n","/**\r\n * Manages UI overlay elements and updates\r\n */\r\nexport class UIController {\r\n  private coinCountElement: HTMLElement;\r\n  private cooldownIndicator: HTMLElement;\r\n  private cooldownTimeElement: HTMLElement;\r\n  private errorMessageElement: HTMLElement;\r\n  private loadingScreen: HTMLElement;\r\n  \r\n  private errorTimeout: number | null = null;\r\n\r\n  constructor() {\r\n    this.coinCountElement = document.getElementById('coin-count')!;\r\n    this.cooldownIndicator = document.getElementById('cooldown-indicator')!;\r\n    this.cooldownTimeElement = document.getElementById('cooldown-time')!;\r\n    this.errorMessageElement = document.getElementById('error-message')!;\r\n    this.loadingScreen = document.getElementById('loading-screen')!;\r\n\r\n    this.setupHelpButton();\r\n  }\r\n\r\n  /**\r\n   * Update coin balance display\r\n   */\r\n  public updateCoinCount(balance: number): void {\r\n    this.coinCountElement.textContent = balance.toLocaleString();\r\n  }\r\n\r\n  /**\r\n   * Show cooldown indicator with remaining time\r\n   */\r\n  public showCooldown(remainingMs: number): void {\r\n    this.cooldownIndicator.style.display = 'block';\r\n    this.cooldownTimeElement.textContent = `${(remainingMs / 1000).toFixed(1)}s`;\r\n  }\r\n\r\n  /**\r\n   * Hide cooldown indicator\r\n   */\r\n  public hideCooldown(): void {\r\n    this.cooldownIndicator.style.display = 'none';\r\n  }\r\n\r\n  /**\r\n   * Show error message temporarily\r\n   */\r\n  public showError(message: string, durationMs: number = 3000): void {\r\n    // Clear existing timeout\r\n    if (this.errorTimeout !== null) {\r\n      window.clearTimeout(this.errorTimeout);\r\n    }\r\n\r\n    // Show message\r\n    this.errorMessageElement.textContent = message;\r\n    this.errorMessageElement.classList.add('show');\r\n\r\n    // Auto-hide after duration\r\n    this.errorTimeout = window.setTimeout(() => {\r\n      this.hideError();\r\n      this.errorTimeout = null;\r\n    }, durationMs);\r\n  }\r\n\r\n  /**\r\n   * Hide error message\r\n   */\r\n  public hideError(): void {\r\n    this.errorMessageElement.classList.remove('show');\r\n  }\r\n\r\n  /**\r\n   * Hide loading screen\r\n   */\r\n  public hideLoadingScreen(): void {\r\n    this.loadingScreen.classList.add('hidden');\r\n    setTimeout(() => {\r\n      this.loadingScreen.style.display = 'none';\r\n    }, 500); // Wait for fade animation\r\n  }\r\n\r\n  /**\r\n   * Show loading screen\r\n   */\r\n  public showLoadingScreen(): void {\r\n    this.loadingScreen.style.display = 'flex';\r\n    this.loadingScreen.classList.remove('hidden');\r\n  }\r\n\r\n  /**\r\n   * Setup help button click handler\r\n   */\r\n  private setupHelpButton(): void {\r\n    const helpButton = document.getElementById('help-button');\r\n    if (helpButton) {\r\n      helpButton.addEventListener('click', () => {\r\n        this.showHelp();\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show help modal\r\n   */\r\n  private showHelp(): void {\r\n    const helpText = `\r\n      üé∞ COINSLOSH - HOW TO PLAY üé∞\r\n      \r\n      1. Click on one of the 4 drop slots to drop a coin\r\n      2. Each drop costs 1 coin\r\n      3. Coins that fall off the FRONT edge earn you 10 coins\r\n      4. Coins that fall off the SIDES are lost\r\n      5. Wait for cooldown between drops\r\n      6. Try to reach the maximum of 999,999 coins!\r\n      \r\n      TIPS:\r\n      ‚Ä¢ Watch how the pusher moves coins\r\n      ‚Ä¢ Experiment with different slot positions\r\n      ‚Ä¢ Coins stack and push each other\r\n    `;\r\n    \r\n    this.showError(helpText, 8000);\r\n  }\r\n\r\n  /**\r\n   * Update UI for maximum balance reached\r\n   */\r\n  public showMaxBalanceReached(): void {\r\n    this.showError('üéâ MAXIMUM BALANCE REACHED! üéâ', 5000);\r\n  }\r\n\r\n  /**\r\n   * Update UI for no coins left\r\n   */\r\n  public showNoCoinsLeft(): void {\r\n    this.showError('‚ö†Ô∏è No coins left! Wait for coins to win...', 3000);\r\n  }\r\n\r\n  /**\r\n   * Flash coin counter (visual feedback for earning)\r\n   */\r\n  public flashCoinCounter(): void {\r\n    this.coinCountElement.style.animation = 'none';\r\n    // Force reflow\r\n    void this.coinCountElement.offsetWidth;\r\n    this.coinCountElement.style.animation = 'pulse 0.5s ease-out';\r\n  }\r\n}\r\n","import { SceneManager } from '../rendering/SceneManager';\r\n// import { MachineBuilder } from '../rendering/MachineBuilder';\r\nimport { PhysicsManager } from '../physics/PhysicsManager';\r\nimport { StateManager } from './StateManager';\r\nimport { UIController } from '../ui/UIController';\r\nimport { GAME_CONFIG } from '../config/constants';\r\n\r\n/**\r\n * Main game manager - orchestrates all subsystems\r\n */\r\nexport class GameManager {\r\n  private sceneManager!: SceneManager;\r\n  private physicsManager!: PhysicsManager;\r\n  private stateManager!: StateManager;\r\n  private uiController!: UIController;\r\n\r\n  private isRunning: boolean = false;\r\n  private lastTime: number = 0;\r\n  private cooldownEndTime: number = 0;\r\n\r\n  /**\r\n   * Initialize all game subsystems\r\n   */\r\n  public async initialize(canvas: HTMLCanvasElement): Promise<void> {\r\n    console.log('[Game] Initializing CoinSlosh...');\r\n\r\n    try {\r\n      // Initialize UI first (for loading screen)\r\n      console.log('[Game] Step 1: UI Controller');\r\n      this.uiController = new UIController();\r\n\r\n      // Initialize state manager\r\n      console.log('[Game] Step 2: State Manager');\r\n      this.stateManager = new StateManager();\r\n      this.stateManager.initialize();\r\n      this.uiController.updateCoinCount(this.stateManager.getBalance());\r\n\r\n      // Initialize scene\r\n      console.log('[Game] Step 3: Three.js Scene');\r\n      this.sceneManager = new SceneManager(canvas);\r\n\r\n      // Initialize physics\r\n      console.log('[Game] Step 4: Rapier3D Physics (TEMPORARILY DISABLED)');\r\n      this.physicsManager = new PhysicsManager();\r\n      // await this.physicsManager.initialize();\r\n      console.log('[Game] Physics initialization skipped for now');\r\n\r\n      // Build machine geometry (without physics for now)\r\n      console.log('[Game] Step 5: Building Machine (visual only)');\r\n      // const machineBuilder = new MachineBuilder(this.sceneManager.scene, this.physicsManager);\r\n      // machineBuilder.build();\r\n      console.log('[Game] Machine building skipped for now');\r\n\r\n      // TODO: Setup coin system\r\n      // TODO: Setup input handlers\r\n\r\n      console.log('[Game] ‚úÖ Initialization complete!');\r\n      this.uiController.hideLoadingScreen();\r\n\r\n      // Start game loop\r\n      this.start();\r\n    } catch (error) {\r\n      console.error('[Game] ‚ùå Initialization failed at step:', error);\r\n      console.error('[Game] Error stack:', error instanceof Error ? error.stack : 'No stack trace');\r\n      if (this.uiController) {\r\n        this.uiController.showError('Failed to initialize game. Check console for details.');\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start game loop\r\n   */\r\n  public start(): void {\r\n    this.isRunning = true;\r\n    this.lastTime = performance.now();\r\n    this.gameLoop(this.lastTime);\r\n    console.log('[Game] Game loop started');\r\n  }\r\n\r\n  /**\r\n   * Stop game loop\r\n   */\r\n  public stop(): void {\r\n    this.isRunning = false;\r\n    console.log('[Game] Game loop stopped');\r\n  }\r\n\r\n  /**\r\n   * Main game loop\r\n   */\r\n  private gameLoop(currentTime: number): void {\r\n    if (!this.isRunning) return;\r\n\r\n    // Calculate delta time\r\n    const deltaTime = Math.min((currentTime - this.lastTime) / 1000, 0.1); // Cap at 100ms\r\n    this.lastTime = currentTime;\r\n\r\n    // Update cooldown\r\n    this.updateCooldown();\r\n\r\n    // Update physics\r\n    if (this.physicsManager.isReady()) {\r\n      this.physicsManager.step(deltaTime);\r\n    }\r\n\r\n    // TODO: Update pusher animation\r\n    // TODO: Update coins\r\n    // TODO: Check edge collisions\r\n\r\n    // Render scene\r\n    this.sceneManager.render();\r\n\r\n    // Continue loop\r\n    requestAnimationFrame((time) => this.gameLoop(time));\r\n  }\r\n\r\n  /**\r\n   * Update cooldown timer and UI\r\n   */\r\n  private updateCooldown(): void {\r\n    const now = Date.now();\r\n    \r\n    if (this.cooldownEndTime > now) {\r\n      const remaining = this.cooldownEndTime - now;\r\n      this.uiController.showCooldown(remaining);\r\n    } else if (this.cooldownEndTime > 0) {\r\n      this.cooldownEndTime = 0;\r\n      this.uiController.hideCooldown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if cooldown is active\r\n   */\r\n  public isCooldownActive(): boolean {\r\n    return Date.now() < this.cooldownEndTime;\r\n  }\r\n\r\n  /**\r\n   * Start cooldown timer\r\n   */\r\n  private startCooldown(): void {\r\n    this.cooldownEndTime = Date.now() + GAME_CONFIG.dropCooldownMs;\r\n    console.log('[Game] Cooldown started');\r\n  }\r\n\r\n  /**\r\n   * Attempt to drop a coin in specified slot\r\n   */\r\n  public dropCoin(slotId: number): boolean {\r\n    // Check if cooldown is active\r\n    if (this.isCooldownActive()) {\r\n      console.log('[Game] Drop rejected: cooldown active');\r\n      return false;\r\n    }\r\n\r\n    // Check if player has coins\r\n    if (!this.stateManager.canDropCoin()) {\r\n      console.log('[Game] Drop rejected: no coins');\r\n      this.uiController.showNoCoinsLeft();\r\n      return false;\r\n    }\r\n\r\n    // Check if at max balance\r\n    if (this.stateManager.isMaxBalance()) {\r\n      console.log('[Game] Drop rejected: max balance');\r\n      this.uiController.showMaxBalanceReached();\r\n      return false;\r\n    }\r\n\r\n    console.log(`[Game] Dropping coin in slot ${slotId}`);\r\n\r\n    // Deduct coin\r\n    this.stateManager.subtractCoins(1);\r\n    this.uiController.updateCoinCount(this.stateManager.getBalance());\r\n\r\n    // Start cooldown\r\n    this.startCooldown();\r\n\r\n    // TODO: Spawn coin at slot position\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Award coins to player\r\n   */\r\n  public awardCoins(amount: number): void {\r\n    this.stateManager.addCoins(amount);\r\n    this.uiController.updateCoinCount(this.stateManager.getBalance());\r\n    this.uiController.flashCoinCounter();\r\n    console.log(`[Game] Awarded ${amount} coins`);\r\n  }\r\n\r\n  /**\r\n   * Get scene manager (for external access)\r\n   */\r\n  public getSceneManager(): SceneManager {\r\n    return this.sceneManager;\r\n  }\r\n\r\n  /**\r\n   * Get physics manager (for external access)\r\n   */\r\n  public getPhysicsManager(): PhysicsManager {\r\n    return this.physicsManager;\r\n  }\r\n\r\n  /**\r\n   * Get state manager (for external access)\r\n   */\r\n  public getStateManager(): StateManager {\r\n    return this.stateManager;\r\n  }\r\n}\r\n","import { GameManager } from './game/GameManager';\r\nimport './styles.css';\r\n\r\n/**\r\n * CoinSlosh Entry Point\r\n */\r\n\r\nconsole.log('üì¶ main.ts loaded!');\r\n\r\n// Wait for DOM to be ready\r\nwindow.addEventListener('DOMContentLoaded', async () => {\r\n  console.log('üé∞ CoinSlosh Starting...');\r\n  console.log('üåê DOM loaded');\r\n\r\n  // Get canvas element\r\n  const canvas = document.getElementById('gameCanvas') as HTMLCanvasElement;\r\n  if (!canvas) {\r\n    console.error('‚ùå Canvas element not found!');\r\n    return;\r\n  }\r\n  console.log('‚úÖ Canvas found:', canvas);\r\n\r\n  // Check WebGL support\r\n  const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');\r\n  if (!gl) {\r\n    alert('WebGL not supported. Please use a modern browser.');\r\n    console.error('‚ùå WebGL not supported');\r\n    return;\r\n  }\r\n  console.log('‚úÖ WebGL supported');\r\n\r\n  try {\r\n    // Create and initialize game\r\n    console.log('üéÆ Creating GameManager...');\r\n    const game = new GameManager();\r\n    \r\n    console.log('üîß Initializing game...');\r\n    await game.initialize(canvas);\r\n\r\n    // Expose game instance for debugging\r\n    (window as any).game = game;\r\n\r\n    console.log('üéÆ CoinSlosh ready! Click drop slots to play.');\r\n  } catch (error) {\r\n    console.error('‚ùå Failed to start game:', error);\r\n    console.error('Stack:', error instanceof Error ? error.stack : 'No stack');\r\n    alert('Failed to initialize game. Please refresh and try again.');\r\n  }\r\n});\r\n\r\n// Handle page visibility changes (pause when hidden)\r\ndocument.addEventListener('visibilitychange', () => {\r\n  if (document.hidden) {\r\n    console.log('‚è∏Ô∏è  Game paused (tab hidden)');\r\n  } else {\r\n    console.log('‚ñ∂Ô∏è  Game resumed');\r\n  }\r\n});\r\n\r\n// Handle beforeunload (save state)\r\nwindow.addEventListener('beforeunload', () => {\r\n  console.log('üíæ Saving game state...');\r\n  // State is auto-saved on changes, but this is a safety net\r\n});\r\n"],"names":["SceneManager","constructor","canvas","this","scene","THREE.Scene","camera","createCamera","renderer","createRenderer","setupLighting","setupBackground","handleResize","window","addEventListener","THREE.PerspectiveCamera","innerWidth","innerHeight","position","set","lookAt","THREE.WebGLRenderer","antialias","alpha","setSize","setPixelRatio","Math","min","devicePixelRatio","shadowMap","enabled","type","THREE.PCFSoftShadowMap","outputColorSpace","THREE.SRGBColorSpace","ambientLight","THREE.AmbientLight","add","mainLight","THREE.DirectionalLight","castShadow","shadow","left","right","top","bottom","mapSize","width","height","neonMagenta","THREE.PointLight","neonCyan","rimLight","gradientTexture","createGradientTexture","background","fog","THREE.Fog","document","createElement","ctx","getContext","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","texture","THREE.CanvasTexture","needsUpdate","aspect","updateProjectionMatrix","render","object","remove","dispose","removeEventListener","PhysicsManager","world","accumulator","fixedTimeStep","initialize","console","log","gravity","x","y","z","RAPIER","World","error","step","deltaTime","createDynamicBody","shape","Error","rigidBodyDesc","RigidBodyDesc","dynamic","setTranslation","rigidBody","createRigidBody","createCollider","createKinematicBody","kinematicPositionBased","createStaticBody","fixed","createCylinderCollider","radius","halfHeight","friction","restitution","ColliderDesc","cylinder","setFriction","setRestitution","createCuboidCollider","halfWidth","halfDepth","cuboid","removeBody","body","removeRigidBody","isReady","GAME_CONFIG","STORAGE_KEY","CURRENT_VERSION","StateManager","state","getDefaultState","loaded","load","save","getBalance","coinBalance","setBalance","value","clampedValue","max","timestamp","Date","now","addCoins","amount","subtractCoins","canDropCoin","isMaxBalance","serialized","JSON","stringify","localStorage","setItem","name","warn","getItem","parsed","parse","validateState","migrateState","reset","version","statistics","migrated","getState","UIController","errorTimeout","coinCountElement","getElementById","cooldownIndicator","cooldownTimeElement","errorMessageElement","loadingScreen","setupHelpButton","updateCoinCount","balance","textContent","toLocaleString","showCooldown","remainingMs","style","display","toFixed","hideCooldown","showError","message","durationMs","clearTimeout","classList","setTimeout","hideError","hideLoadingScreen","showLoadingScreen","helpButton","showHelp","showMaxBalanceReached","showNoCoinsLeft","flashCoinCounter","animation","offsetWidth","GameManager","isRunning","lastTime","cooldownEndTime","uiController","stateManager","sceneManager","physicsManager","start","stack","performance","gameLoop","stop","currentTime","updateCooldown","requestAnimationFrame","time","remaining","isCooldownActive","startCooldown","dropCoin","slotId","awardCoins","getSceneManager","getPhysicsManager","getStateManager","async","alert","game","hidden"],"mappings":"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"}